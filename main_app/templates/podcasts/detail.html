{% extends 'base.html' %} 
{% load static %} 

{% block head %}
<link
  rel="stylesheet"
  type="text/css"
  href="{% static 'css/podcast-detail.css' %}"
/>
{% endblock %}

{% block content %}
  
<div class="card">
  <div class="card-bg">
  </div>
  <div class="card-content">
    <h2>{{podcast.title}}</h2>
    <h4>{{podcast.get_category_display}}</h4>
    <p>{{podcast.description}}</p>
    <div class="podcast-actions">
      <a href="{% url 'podcasts_update' podcast.id %}" class="btn warn">Edit</a>
      <a href="{% url 'podcasts_delete' podcast.id %}" class="btn danger">Delete</a>
    </div>
    <section class="reviews">
      <h2>Reviews</h2>
      <h3>Add a Reviews</h3>
      <form action="{% url 'add_review' podcast.id %}" method="post">
        {% csrf_token %}
        {{review_form.as_p}}
        <button type="submit" class="btn submit">Add Review</button>
      </form>
      {% if podcast.review_set.all.count %}
        {% for review in podcast.review_set.all %}
          <h4>{{review.user.username}}</h4>
          <h4>Rating = {{review.rating}}</h4>
          <h5>{{review.text}}</h5>
          {% if user == review.user %}
            <div class="review-actions">
              <a href="{% url 'reviews_update' review.id %}" class="btn warn">Edit</a>
              <a href="{% url 'reviews_delete' review.id %}" class="btn danger">Delete</a>
            </div>
          {% endif %}
        {% endfor %}
      {% else %}
        <h3>No reviews have been given to this podcast yet...</h3>
      {% endif %}
    </section>
  </div>
</div>

{% endblock %}